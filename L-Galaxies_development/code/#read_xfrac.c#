#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>
#include <time.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <unistd.h>

#include "allvars.h"
#include "proto.h"

/*  @file read_xfrac.c
    @brief Read in inonization fraction from C2Ray  
*/

void load_xfrac(int SnapNum)
{
  FILE* fp;
  char buf[1024];
  int ncells;
  float redshift;
  redshift = ZZ[SnapNum];
  sprintf(buf, "%s/xfrac3d_%2.3f.bin", XfracDir,redshift);
  if(!(fp = fopen(buf,"r")))
    {
      char sbuf[1000];
      sprintf(sbuf, "can't open file `%s'\n", buf);
      terminate(sbuf);
    }
  XfracData = mymalloc("XfracData",sizeof(float)*ncells);
  myfread(XfracData, ncells, sizeof(float),fp);
  
  myfree(XfracData);
  fclose(fp);
}